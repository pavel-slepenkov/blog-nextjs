<!DOCTYPE html><html><head><meta charSet="utf-8"/><link rel="icon" href="/favicon.ico"/><link href="https://unpkg.com/prismjs@1.23.0/themes/prism-okaidia.css" rel="stylesheet"/><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="description" content="Pavel Slepenkov&#x27;s personal blog: stories about BI, python, salesforce and data analysis"/><meta http-equiv="cache-control" content="Private"/><meta http-equiv="Expires" content="366000"/><meta property="og:locale" content="en_US"/><meta name="og:title" content="Pavel Slepenkov&#x27;s personal blog"/><meta property="og:description" content="stories about BI, python, salesforce and data analysis"/><meta property="og:type" content="article"/><meta property="og:site_name" content="pavelslepenkov.info"/><meta property="og:image" content="/og.png"/><meta name="twitter:title" content="Pavel Slepenkov&#x27;s personal blog"/><meta name="twitter:description" content="stories about BI, python, salesforce and data analysis"/><meta name="twitter:card" content="summary_large_image"/><meta property="twitter:image" content="/og.png"/><meta name="keywords" content="python, BI, sql, salesforce, data engineering, apex, soql, data analisys"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-63037633-1"></script><script>
                            window.dataLayer = window.dataLayer || [];
                            function gtag(){dataLayer.push(arguments);}
                            gtag('js', new Date());
                            gtag('config', 'UA-63037633-1');
                    </script><style>@import url(&#x27;https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300&amp;family=Spectral:wght@300;600&amp;display=swap&#x27;);</style><title>Apex variable declaration and for loop performance</title><meta name="next-head-count" content="23"/><link rel="preload" href="/_next/static/css/8ed85b7126e02c37.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8ed85b7126e02c37.css" data-n-g=""/><link rel="preload" href="/_next/static/css/c030ed0cc76c59b0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c030ed0cc76c59b0.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee7e63bc15b31913.js" defer=""></script><script src="/_next/static/chunks/framework-ad45764ecfcae9e5.js" defer=""></script><script src="/_next/static/chunks/main-ee0cf4b7f81d7c24.js" defer=""></script><script src="/_next/static/chunks/pages/_app-2398585b21d2d8c8.js" defer=""></script><script src="/_next/static/chunks/105-51803cf0fd5a7825.js" defer=""></script><script src="/_next/static/chunks/358-14c60bb94e9d94b9.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-c9b3c3f336e43dc2.js" defer=""></script><script src="/_next/static/ILy-gCchHD1unXV3pNsGn/_buildManifest.js" defer=""></script><script src="/_next/static/ILy-gCchHD1unXV3pNsGn/_ssgManifest.js" defer=""></script></head><body class="centered"><script src="noflash.js"></script><script src="PathSolver.js"></script><div id="__next"><div class="layout_container__fbLkO"><div class="no-print"><header class="layout_header__kY0Lt"><div class="navbar-link centered"><a class="layout_devNull__CjwH1" href="/">Technical notes</a>‚Äî‚Äî‚Äî‚Äî‚Äî<a class="layout_devNull__CjwH1" href="/cv">CV</a>‚Äî‚Äî‚Äî‚Äî‚Äî<a class="layout_devNull__CjwH1" href="/books">Books &amp; Readings</a></div><div class="DarkModeToggle_darkModeToggle__m5z3H"><button type="button">üåû</button><button type="button">üåö</button></div></header></div><main><article><h1 class="utils_headingXl__u25Y2">Apex variable declaration and for loop performance</h1><div class="utils_lightText__eUzGY"><time dateTime="2016-08-27T09:15:50+01:00">August 27, 2016</time></div><div><p>I found this a few times in a different projects and now I‚Äôd share this common mistake with you.</p>
<div class="remark-highlight"><pre class="language-java"><code class="language-java"><span class="token class-name">String</span> someVariable <span class="token operator">=</span> ''<span class="token punctuation">;</span>

<span class="token comment">// 50 lines of code between declaration and first use</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Account</span> acc<span class="token operator">:</span> accounts<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    someVariable <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">acc<span class="token punctuation">.</span></span>Some_Field__c</span><span class="token punctuation">;</span>
    <span class="token comment">// rest of the loop</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>Actually I really hate to find something like this in my codebase. What‚Äôs wrong with this code? Just one moment ‚Äì the string variable which is on scope of for loop is declared outside of the for loop. That was an optimisation for some old compilers for C/C++ a many years ago. But modern compilers can optimise your code much better that you. So, just let them do that.</p>
<div class="remark-highlight"><pre class="language-java"><code class="language-java"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Account</span> acc<span class="token operator">:</span> accounts<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> someVariable <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">acc<span class="token punctuation">.</span></span>Some_Field__c</span><span class="token punctuation">;</span>
    <span class="token comment">// rest of the loop</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>This code will be much effective that the first one. I did a few tests on Apex.</p>
<div class="remark-highlight"><pre class="language-java"><code class="language-java"><span class="token class-name">String</span> s1<span class="token punctuation">;</span>
<span class="token class-name">Datetime</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&#x3C;</span> <span class="token number">100000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    s1 <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> ‚Äì start<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>with results:</p>
<p>USER_DEBUG [6]|DEBUG|3006
USER_DEBUG [6]|DEBUG|3029
USER_DEBUG [6]|DEBUG|3189
USER_DEBUG [6]|DEBUG|3256
USER_DEBUG [7]|DEBUG|3346</p>
<p>and run</p>
<div class="remark-highlight"><pre class="language-java"><code class="language-java"><span class="token class-name">Datetime</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&#x26;</span>amp<span class="token punctuation">;</span>lt<span class="token punctuation">;</span> <span class="token number">100000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> s1 <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> ‚Äì start<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>with the following results:</p>
<p>USER_DEBUG [5]|DEBUG|2954
USER_DEBUG [5]|DEBUG|2978
USER_DEBUG [5]|DEBUG|3102
USER_DEBUG [5]|DEBUG|3176
USER_DEBUG [5]|DEBUG|3205</p>
<p>Runs through 300.000 iterations:</p>
<p><strong>Variable declared outside the loop</strong>
USER_DEBUG [6]|DEBUG|8260
USER_DEBUG [6]|DEBUG|8415
USER_DEBUG [6]|DEBUG|8606
USER_DEBUG [6]|DEBUG|8614
USER_DEBUG [6]|DEBUG|8739
USER_DEBUG [6]|DEBUG|8852
USER_DEBUG [6]|DEBUG|8940
USER_DEBUG [6]|DEBUG|9109
USER_DEBUG [6]|DEBUG|9184
USER_DEBUG [6]|DEBUG|9267
USER_DEBUG [6]|DEBUG|9292
USER_DEBUG [6]|DEBUG|9461</p>
<p><strong>Variable declared inside the loop</strong>
USER_DEBUG [5]|DEBUG|8093
USER_DEBUG [5]|DEBUG|8135
USER_DEBUG [5]|DEBUG|8448
USER_DEBUG [5]|DEBUG|8598
USER_DEBUG [5]|DEBUG|8785
USER_DEBUG [5]|DEBUG|8948
USER_DEBUG [5]|DEBUG|9032
USER_DEBUG [5]|DEBUG|9087
USER_DEBUG [5]|DEBUG|9122
USER_DEBUG [5]|DEBUG|9260
USER_DEBUG [5]|DEBUG|9330
USER_DEBUG [5]|DEBUG|9347</p>
<p><em>*Results was sorted for better readability</em></p>
<p>As you can see the code which use a declaration of variables inside the loop works faster or with the same time of execution. But such code is much more supportable and readable.</p>
</div></article><div><span class="utils_tag__r8GDN"><a href="/tag/apex">[<!-- -->apex<!-- -->]</a></span><span class="utils_tag__r8GDN"><a href="/tag/best-practice">[<!-- -->best practice<!-- -->]</a></span><span class="utils_tag__r8GDN"><a href="/tag/refactoring-time">[<!-- -->refactoring time<!-- -->]</a></span><span class="utils_tag__r8GDN"><a href="/tag/salesforce">[<!-- -->salesforce<!-- -->]</a></span></div></main><div class="layout_backToHome__9sjx_"><a href="/">‚áê back to home</a></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"p718","contentHtml":"\u003cp\u003eI found this a few times in a different projects and now I‚Äôd share this common mistake with you.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-java\"\u003e\u003ccode class=\"language-java\"\u003e\u003cspan class=\"token class-name\"\u003eString\u003c/span\u003e someVariable \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e ''\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// 50 lines of code between declaration and first use\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eAccount\u003c/span\u003e acc\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e accounts\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    someVariable \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token class-name\"\u003e\u003cspan class=\"token namespace\"\u003eacc\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003c/span\u003eSome_Field__c\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e// rest of the loop\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eActually I really hate to find something like this in my codebase. What‚Äôs wrong with this code? Just one moment ‚Äì the string variable which is on scope of for loop is declared outside of the for loop. That was an optimisation for some old compilers for C/C++ a many years ago. But modern compilers can optimise your code much better that you. So, just let them do that.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-java\"\u003e\u003ccode class=\"language-java\"\u003e\u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eAccount\u003c/span\u003e acc\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e accounts\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token class-name\"\u003eString\u003c/span\u003e someVariable \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token class-name\"\u003e\u003cspan class=\"token namespace\"\u003eacc\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003c/span\u003eSome_Field__c\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e// rest of the loop\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eThis code will be much effective that the first one. I did a few tests on Apex.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-java\"\u003e\u003ccode class=\"language-java\"\u003e\u003cspan class=\"token class-name\"\u003eString\u003c/span\u003e s1\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token class-name\"\u003eDatetime\u003c/span\u003e start \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSystem\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003enow\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eInteger\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e \u003cspan class=\"token number\"\u003e100000\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e i\u003cspan class=\"token operator\"\u003e++\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    s1 \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eString\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003evalueOf\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token class-name\"\u003eSystem\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003edebug\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eSystem\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003enow\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003egetTime\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e ‚Äì start\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003egetTime\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003ewith results:\u003c/p\u003e\n\u003cp\u003eUSER_DEBUG [6]|DEBUG|3006\nUSER_DEBUG [6]|DEBUG|3029\nUSER_DEBUG [6]|DEBUG|3189\nUSER_DEBUG [6]|DEBUG|3256\nUSER_DEBUG [7]|DEBUG|3346\u003c/p\u003e\n\u003cp\u003eand run\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-java\"\u003e\u003ccode class=\"language-java\"\u003e\u003cspan class=\"token class-name\"\u003eDatetime\u003c/span\u003e start \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSystem\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003enow\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eInteger\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e\u0026#x26;\u003c/span\u003eamp\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003elt\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token number\"\u003e100000\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e i\u003cspan class=\"token operator\"\u003e++\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token class-name\"\u003eString\u003c/span\u003e s1 \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eString\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003evalueOf\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token class-name\"\u003eSystem\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003edebug\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eSystem\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003enow\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003egetTime\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e ‚Äì start\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003egetTime\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003ewith the following results:\u003c/p\u003e\n\u003cp\u003eUSER_DEBUG [5]|DEBUG|2954\nUSER_DEBUG [5]|DEBUG|2978\nUSER_DEBUG [5]|DEBUG|3102\nUSER_DEBUG [5]|DEBUG|3176\nUSER_DEBUG [5]|DEBUG|3205\u003c/p\u003e\n\u003cp\u003eRuns through 300.000 iterations:\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eVariable declared outside the loop\u003c/strong\u003e\nUSER_DEBUG [6]|DEBUG|8260\nUSER_DEBUG [6]|DEBUG|8415\nUSER_DEBUG [6]|DEBUG|8606\nUSER_DEBUG [6]|DEBUG|8614\nUSER_DEBUG [6]|DEBUG|8739\nUSER_DEBUG [6]|DEBUG|8852\nUSER_DEBUG [6]|DEBUG|8940\nUSER_DEBUG [6]|DEBUG|9109\nUSER_DEBUG [6]|DEBUG|9184\nUSER_DEBUG [6]|DEBUG|9267\nUSER_DEBUG [6]|DEBUG|9292\nUSER_DEBUG [6]|DEBUG|9461\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eVariable declared inside the loop\u003c/strong\u003e\nUSER_DEBUG [5]|DEBUG|8093\nUSER_DEBUG [5]|DEBUG|8135\nUSER_DEBUG [5]|DEBUG|8448\nUSER_DEBUG [5]|DEBUG|8598\nUSER_DEBUG [5]|DEBUG|8785\nUSER_DEBUG [5]|DEBUG|8948\nUSER_DEBUG [5]|DEBUG|9032\nUSER_DEBUG [5]|DEBUG|9087\nUSER_DEBUG [5]|DEBUG|9122\nUSER_DEBUG [5]|DEBUG|9260\nUSER_DEBUG [5]|DEBUG|9330\nUSER_DEBUG [5]|DEBUG|9347\u003c/p\u003e\n\u003cp\u003e\u003cem\u003e*Results was sorted for better readability\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eAs you can see the code which use a declaration of variables inside the loop works faster or with the same time of execution. But such code is much more supportable and readable.\u003c/p\u003e\n","title":"Apex variable declaration and for loop performance","date":"2016-08-27T09:15:50+01:00","status":"publish","permalink":"/?p=718","author":"pavel","excerpt":"","type":"post","category":["apex","force.com"],"tag":["apex","best practice","refactoring time","salesforce"],"post_format":[],"dsq_thread_id":["5617202917"]}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"p718"},"buildId":"ILy-gCchHD1unXV3pNsGn","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>