{"pageProps":{"postData":{"id":"p173","contentHtml":"<p><strong>Ant migration tool</strong> for Force.com is incredible tool which widens your development and deployment abilities.</p>\n<p>First of all there are the list of the benefits which it brings to you</p>\n<ul>\n<li>deployment via command line in fully automated mode</li>\n<li>running unit tests during deployment to sandbox</li>\n<li>using Continuous Integration server like Jenkins</li>\n</ul>\n<p>Let's see deeply. You need to install <a href=\"http://ant.apache.org/\">Apache Ant.</a>, after that you need to download migration tool from your Salesforce org by the following way: <strong>Setup → Develop → Tools</strong>, there is you can find a link to download. Next you just need to extract jar file into <strong>lib</strong> directory of ANT_HOME.</p>\n<p>The next step is creation of build files and addition a connection information of your project to it. You can find the basic ant configuration <a href=\"https://github.com/pavel-slepenkov/salesforce-ant-migration-tool-demo/tree/master/beginners-demo\">here</a>. This's GitHub repo where I collect Salesforce Ant Migration Tool configurations.</p>\n<p>Here you can see the following structure</p>\n<div class=\"remark-highlight\"><pre class=\"language-unknown\"><code class=\"language-unknown\">src/\nbuild.properties\nbuild.xml</code></pre></div>\n<p>This's basic structure for salesforce projects, where <strong>src</strong> directory was created by Eclipse and holds all metadata components in its own folders, and two files <strong>build.xml</strong> and <strong>build.properties</strong> which are generic for <strong>Ant</strong>.</p>\n<p><strong>build.properties</strong> is a file for a storing all configured properties, like username and password, urls, sandbox names, etc.</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># build.properties</span>\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># Specify the login credentials for the desired Salesforce organization</span>\nsf.username <span class=\"token operator\">=</span> <span class=\"token operator\">&#x3C;</span>Insert your Salesforce username here<span class=\"token operator\">></span>\nsf.password <span class=\"token operator\">=</span> <span class=\"token operator\">&#x3C;</span>Insert your Salesforce password + Security Token here<span class=\"token operator\">></span>\n<span class=\"token comment\">#sf.pkgName = &#x3C;Insert comma separated package names to be retrieved></span>\n<span class=\"token comment\">#sf.zipFile = &#x3C;Insert path of the zipfile to be retrieved></span>\n<span class=\"token comment\">#sf.metadataType = &#x3C;Insert metadata type name for which listMetadata or bulkRetrieve operations are to be performed></span>\n\n<span class=\"token comment\"># Use ‘https://login.salesforce.com' for production or developer edition (the default if not specified).</span>\n<span class=\"token comment\"># Use ‘https://test.salesforce.com for sandbox.</span>\nsf.serverurl <span class=\"token operator\">=</span> https://login.salesforce.com\n\nsf.maxPoll <span class=\"token operator\">=</span> <span class=\"token number\">20</span>\n</code></pre></div>\n<p><strong>build.xml</strong> is an Ant script which describes all possible build operations for your project. Below you can find the very basic ant script for Force.com.</p>\n<div class=\"remark-highlight\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>project</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Demo usage of Salesforce Ant Migration Tool<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">default</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>testDeploy<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">basedir</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>sf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>antlib:com.salesforce<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>!–</span> <span class=\"token attr-name\">default</span> <span class=\"token attr-name\">properties</span> <span class=\"token attr-name\">–</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>property</span> <span class=\"token attr-name\">file</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>build.properties<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>property</span> <span class=\"token attr-name\">environment</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>env<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>target<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>src<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>target</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>testDeploy<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>!–</span> <span class=\"token attr-name\">Verify</span> <span class=\"token attr-name\">the</span> <span class=\"token attr-name\">abbility</span> <span class=\"token attr-name\">to</span> <span class=\"token attr-name\">upload</span> <span class=\"token attr-name\">the</span> <span class=\"token attr-name\">contents</span> <span class=\"token attr-name\">of</span> <span class=\"token attr-name\">the</span> <span class=\"token attr-name\">\"src\"</span> <span class=\"token attr-name\">package</span> <span class=\"token attr-name\">–</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span><span class=\"token namespace\">sf:</span>deploy</span> <span class=\"token attr-name\">username</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>${sf.username}<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">password</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>${sf.password}<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">serverurl</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>${sf.serverurl}<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">maxPoll</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>${sf.maxPoll}<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">deployRoot</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>src<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">checkOnly</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">runAllTests</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>target</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>target</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>deploy<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>!–</span> <span class=\"token attr-name\">Upload</span> <span class=\"token attr-name\">the</span> <span class=\"token attr-name\">contents</span> <span class=\"token attr-name\">of</span> <span class=\"token attr-name\">the</span> <span class=\"token attr-name\">\"src\"</span> <span class=\"token attr-name\">directory</span> <span class=\"token attr-name\">and</span> <span class=\"token attr-name\">run</span> <span class=\"token attr-name\">all</span> <span class=\"token attr-name\">test</span> <span class=\"token attr-name\">–</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span><span class=\"token namespace\">sf:</span>deploy</span> <span class=\"token attr-name\">username</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>${sf.username}<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">password</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>${sf.password}<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">serverurl</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>${sf.serverurl}<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">maxPoll</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>${sf.maxPoll}<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">deployRoot</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>scr<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">runAllTests</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span><span class=\"token namespace\">sf:</span>deploy</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>target</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>!–</span> <span class=\"token attr-name\">retriev</span> <span class=\"token attr-name\">metadata</span> <span class=\"token attr-name\">from</span> <span class=\"token attr-name\">org</span> <span class=\"token attr-name\">into</span> <span class=\"token attr-name\">local</span> <span class=\"token attr-name\">project</span> <span class=\"token attr-name\">folder</span> <span class=\"token attr-name\">src</span> <span class=\"token attr-name\">(by</span> <span class=\"token attr-name\">default),</span> <span class=\"token attr-name\">but</span> <span class=\"token attr-name\">it</span> <span class=\"token attr-name\">might</span> <span class=\"token attr-name\">be</span> <span class=\"token attr-name\">overridden</span> <span class=\"token attr-name\">in</span> <span class=\"token attr-name\">command</span> <span class=\"token attr-name\">line</span> <span class=\"token attr-name\">–</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>target</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>retrieve<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">description</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Retrieves metadata from ${sf.env} to ${target}<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>mkdir</span> <span class=\"token attr-name\">dir</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>${target}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span><span class=\"token namespace\">sf:</span>retrieve</span> <span class=\"token attr-name\">username</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>${sf.username}${sf.env}<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">password</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>${sf.password}<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">serverurl</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>${sf.serverurl}<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">retrieveTarget</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>${target}<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">unpackaged</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>package.xml<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>target</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>!–</span> <span class=\"token attr-name\">Retrieve</span> <span class=\"token attr-name\">the</span> <span class=\"token attr-name\">information</span> <span class=\"token attr-name\">of</span> <span class=\"token attr-name\">all</span> <span class=\"token attr-name\">items</span> <span class=\"token attr-name\">of</span> <span class=\"token attr-name\">a</span> <span class=\"token attr-name\">particular</span> <span class=\"token attr-name\">metadata</span> <span class=\"token attr-name\">type</span> <span class=\"token attr-name\">–</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>target</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>listMetadata<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span><span class=\"token namespace\">sf:</span>listMetadata</span> <span class=\"token attr-name\">username</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>${sf.username}<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">password</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>${sf.password}<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">serverurl</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>${sf.serverurl}<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">metadataType</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>${sf.metadataType}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>target</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>!–</span> <span class=\"token attr-name\">Retrieve</span> <span class=\"token attr-name\">the</span> <span class=\"token attr-name\">information</span> <span class=\"token attr-name\">on</span> <span class=\"token attr-name\">all</span> <span class=\"token attr-name\">supported</span> <span class=\"token attr-name\">metadata</span> <span class=\"token attr-name\">type</span> <span class=\"token attr-name\">–</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>target</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>describeMetadata<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span><span class=\"token namespace\">sf:</span>describeMetadata</span> <span class=\"token attr-name\">username</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>${sf.username}<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">password</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>${sf.password}<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">serverurl</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>${sf.serverurl}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>target</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>project</span><span class=\"token punctuation\">></span></span>\n\n</code></pre></div>\n<p>Here are 5 targets:</p>\n<ul>\n<li>testDeploy</li>\n<li>deploy</li>\n<li>retrieve</li>\n<li>listMetadata</li>\n<li>describeMetadata</li>\n</ul>\n<p>In the start you need just the first two.</p>\n<p><strong>testDeploy</strong> allows you to test deployment without committing any changes into the cloud environment. With this operation you can verify stability of all metadata components which are described in <strong>package.xml</strong>. For basic project it will take less than 1 min, what is faster than such operation via Eclipse in a few times.</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\">~$ ant testDeploy\n</code></pre></div>\n<p>When you finished with <strong>testDeploy</strong> and have got no error messages, you can go ahead with <strong>deploy</strong> task which allows you to deploy all metadata components into you org with running all unit tests.</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\">~$ ant deploy\n</code></pre></div>\n<p>These are the main tasks which would be used everyday, the 3 next tasks are more rarely used, the first one is <strong>retrieve</strong> which allows you to download the latest version of metadata from salesforce, by default it goes to <strong>src</strong> directorey, but if you need to redirect it to another folder you can use command line parameters</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\">~$ ant -Dtarget<span class=\"token operator\">=</span>retrieveResults retrieve\n</code></pre></div>\n<p>This command will download metadata into folder <strong>retrieveResults</strong> which should be at same level with <strong>src</strong> dirrectory.</p>\n<p>The other two target allow to list metadata in the org and describe it. It might be that you do not need to use them at all.</p>\n","title":"Start with Salesforce ant migration tool","date":"2013-08-10T21:41:11+01:00","status":"publish","permalink":"/?p=173","author":"pavel","excerpt":"","type":"post","category":["force.com","migration tool"],"tag":["force.com","ant migration tool","tools","devops"],"post_format":[],"cleanretina_sidebarlayout":["default"],"fplayout":["fullwidth"],"original_post_id":["173"],"dsq_thread_id":["5614227609"]}},"__N_SSG":true}