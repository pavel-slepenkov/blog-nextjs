{"pageProps":{"postData":{"id":"p927","contentHtml":"<p>Currency formatting is very common task when you need to bring financial data to the UI. Salesforce has Currency data type and it’s a best choice to store financial data. But when you need to display it on UI it might be tricky. So, my initial setup for this post as follow: I have a quote with quote line items related to it and I need to generate PDF with all that data formatted.</p>\n<p><img src=\"/images/p927/img1.png\" alt=\"\">\nBasically you can use the following code</p>\n<div class=\"remark-highlight\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span><span class=\"token namespace\">apex:</span>outputText</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{0, number, Currency}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span><span class=\"token namespace\">apex:</span>param</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{!qli.TotalPrice}<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span><span class=\"token namespace\">apex:</span>outputText</span><span class=\"token punctuation\">></span></span>\n</code></pre></div>\n<p>This code will be working just fine until you need to display currency which differs from your organization default currency. For my case it was EURO. When I used above code PDF looks like that</p>\n<p><img src=\"/images/p927/img2.png\" alt=\"\"></p>\n<figcaption>hmmm, where’s my euros?</figcaption>\n<p>The next thing you can try is to set display format explicitly</p>\n<div class=\"remark-highlight\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span><span class=\"token namespace\">apex:</span>outputText</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{!<span class=\"token punctuation\">'</span>{0, number, ‘###,###,###.00′}’}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span><span class=\"token namespace\">apex:</span>param</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{!qli.TotalPrice}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span><span class=\"token namespace\">apex:</span>outputText</span><span class=\"token punctuation\">></span></span>\n</code></pre></div>\n<p>It will print currency in correct format but without currency symbol. Finally in order to have correct format you have to add currency symbol to your formatting expression. You could do it in this way</p>\n<div class=\"remark-highlight\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span><span class=\"token namespace\">apex:</span>outputText</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{!<span class=\"token punctuation\">'</span>{0, number,’ + quote.CurrencySymbol + ‘###,###,##0.00}’}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span><span class=\"token namespace\">apex:</span>param</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{!qli.TotalPrice}<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span><span class=\"token namespace\">apex:</span>outputText</span><span class=\"token punctuation\">></span></span>\n</code></pre></div>\n<p>Or like that</p>\n<div class=\"remark-highlight\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span><span class=\"token namespace\">apex:</span>outputText</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{!quote.CurrencySymbol + ‘{0,number, ###,###,###.00}’}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span><span class=\"token namespace\">apex:</span>param</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{!qli.TotalPrice}<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span><span class=\"token namespace\">apex:</span>outputText</span><span class=\"token punctuation\">></span></span>\n</code></pre></div>\n<p>and result will be following with correct currency symbol which you have to define via apex controller</p>\n<p><img src=\"/images/p927/img3.png\" alt=\"\"></p>\n","title":"Multi-Currency on Visualforce pages","date":"2018-11-13T16:25:33+00:00","status":"publish","permalink":"/?p=927","author":"pavel","excerpt":"","type":"post","category":["Uncategorized"],"tag":[],"post_format":[]}},"__N_SSG":true}